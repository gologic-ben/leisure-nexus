<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>References</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
	<img th:src="${currentUser.get('picture')}" th:attr="alt=${user.id}" /><h2 th:text="${currentUser.get('name')}"></h2>	<a th:href="@{/logout}">Log Out</a>	

	<p>You have referred the following movies</p>
	<ul>
		<li th:each="ref: ${sourceReferences}"><em
			th:text="'Movie ' + ${ref.title} + ' is referred to ' + ${ref.target?.name}"></em>
			<a th:href="@{/ref/remove(userId=${ref.source.id},referenceId=${ref.id})}">Remove</a>
		</li>
	</ul>
	<form class="form-inline" th:action="@{/ref/add}">
		<input type="hidden" name="sourceId" th:value="${user.id}"> 
		<label for="targetId">Target ID:</label> <input type="text" id="targetId" placeholder="Enter targetId" name="targetId"> 
		<label for="tmdbId">TMDB ID:</label> <input type="text" id="tmdbId" placeholder="Enter TMDB movie ID" name="tmdbId"> 
		<button type="submit">Submit</button>
	</form>

	<p>Your friends have referred you the following movies</p>
	<ul>
		<li th:each="ref: ${targetReferences}"><em
			th:text="'Movie ' + ${ref.title} + ' is referred from ' + ${ref.source.name}"></em>
			<a th:href="@{/ref/remove(userId=${ref.target.id},referenceId=${ref.id})}">Remove</a>
		</li>
	</ul>

</body>
</html>